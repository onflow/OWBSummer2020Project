{"ast":null,"code":"import _styled from \"@emotion/styled-base\";\nvar _jsxFileName = \"/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { ASSOCIATE_WALLET } from \"@data/mutations\";\nimport JSONPretty from \"react-json-pretty\";\nimport { toast } from \"react-toastify\";\nimport { CURRENT_USER_QUERY } from \"../../data/queries\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport checkCollection from \"../../flow/scripts/check-collection.cdc\";\nimport checkActiveWallet from \"../../flow/scripts/check-active-wallet.cdc\";\nimport vaultBalance from \"../../flow/scripts/vault-balance.cdc\";\nimport getCollectionItems from \"../../flow/scripts/get-collection-items.cdc\";\nimport userVault from \"../../flow/transactions/user-vault.cdc\";\nimport setupNFTCollection from \"../../flow/transactions/setup-nft-collection.cdc\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\nfcl.config().put(\"challenge.handshake\", \"http://localhost:8701/flow/authenticate\");\nconst FUNGIBLE_TOKEN_CONTRACT_ADDRESS = \"01cf0e2f2f715450\";\nconst NON_FUNGIBLE_TOKEN_CONTRACT_ADDRESS = \"f3fcd2c1a78f5eee\";\n\nconst Container = /*#__PURE__*/_styled(\"div\", {\n  target: \"e1fz02ct0\",\n  label: \"Container\"\n})({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\"\n}, false ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9sdWtlaGFtaWx0b24vZGV2ZWxvcG1lbnQvbHlyYS1sYWJzLWRldi9seXJhLWxhYnMvZnJvbnRlbmQvY29tcG9uZW50cy93YWxsZXQtc2V0dGluZ3MvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNEJrQiIsImZpbGUiOiIvVXNlcnMvbHVrZWhhbWlsdG9uL2RldmVsb3BtZW50L2x5cmEtbGFicy1kZXYvbHlyYS1sYWJzL2Zyb250ZW5kL2NvbXBvbmVudHMvd2FsbGV0LXNldHRpbmdzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCAqIGFzIHNkayBmcm9tIFwiQG9uZmxvdy9zZGtcIjtcbmltcG9ydCB7IHVzZU11dGF0aW9uIH0gZnJvbSBcIkBhcG9sbG8vcmVhY3QtaG9va3NcIjtcbmltcG9ydCB7IEFTU09DSUFURV9XQUxMRVQgfSBmcm9tIFwiQGRhdGEvbXV0YXRpb25zXCI7XG5pbXBvcnQgSlNPTlByZXR0eSBmcm9tIFwicmVhY3QtanNvbi1wcmV0dHlcIjtcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInJlYWN0LXRvYXN0aWZ5XCI7XG5pbXBvcnQgeyBDVVJSRU5UX1VTRVJfUVVFUlkgfSBmcm9tIFwiLi4vLi4vZGF0YS9xdWVyaWVzXCI7XG5pbXBvcnQgQ29yYWxCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9jb3JhbFwiO1xuaW1wb3J0IE1pbnRCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9taW50XCI7XG5pbXBvcnQgR3JhZGllbnRCdXR0b24gZnJvbSBcIkBsaWJyYXJ5L2NvbXBvbmVudHMvYnV0dG9ucy9ncmFkaWVudFwiO1xuaW1wb3J0IGNoZWNrUmVmZXJlbmNlIGZyb20gXCIuLi8uLi9mbG93L3NjcmlwdHMvY2hlY2stcmVmLmNkY1wiO1xuaW1wb3J0IGNoZWNrQ29sbGVjdGlvbiBmcm9tIFwiLi4vLi4vZmxvdy9zY3JpcHRzL2NoZWNrLWNvbGxlY3Rpb24uY2RjXCI7XG5pbXBvcnQgY2hlY2tBY3RpdmVXYWxsZXQgZnJvbSBcIi4uLy4uL2Zsb3cvc2NyaXB0cy9jaGVjay1hY3RpdmUtd2FsbGV0LmNkY1wiO1xuaW1wb3J0IHZhdWx0QmFsYW5jZSBmcm9tIFwiLi4vLi4vZmxvdy9zY3JpcHRzL3ZhdWx0LWJhbGFuY2UuY2RjXCI7XG5pbXBvcnQgZ2V0Q29sbGVjdGlvbkl0ZW1zIGZyb20gXCIuLi8uLi9mbG93L3NjcmlwdHMvZ2V0LWNvbGxlY3Rpb24taXRlbXMuY2RjXCI7XG5pbXBvcnQgdXNlclZhdWx0IGZyb20gXCIuLi8uLi9mbG93L3RyYW5zYWN0aW9ucy91c2VyLXZhdWx0LmNkY1wiO1xuaW1wb3J0IHNldHVwTkZUQ29sbGVjdGlvbiBmcm9tIFwiLi4vLi4vZmxvdy90cmFuc2FjdGlvbnMvc2V0dXAtbmZ0LWNvbGxlY3Rpb24uY2RjXCI7XG5pbXBvcnQgc3R5bGVkIGZyb20gXCJAZW1vdGlvbi9zdHlsZWRcIjtcbmltcG9ydCAqIGFzIGZjbCBmcm9tIFwiQG9uZmxvdy9mY2xcIjtcbmltcG9ydCB7IFdISVRFLCBMSUdIVF9DT1JBTCwgTUFHSUNfTUlOVCB9IGZyb20gXCJAc3R5bGUvY29sb3JzXCI7XG5cbmZjbFxuICAuY29uZmlnKClcbiAgLnB1dChcImNoYWxsZW5nZS5oYW5kc2hha2VcIiwgXCJodHRwOi8vbG9jYWxob3N0Ojg3MDEvZmxvdy9hdXRoZW50aWNhdGVcIik7XG5cbmNvbnN0IEZVTkdJQkxFX1RPS0VOX0NPTlRSQUNUX0FERFJFU1MgPSBcIjAxY2YwZTJmMmY3MTU0NTBcIjtcbmNvbnN0IE5PTl9GVU5HSUJMRV9UT0tFTl9DT05UUkFDVF9BRERSRVNTID0gXCJmM2ZjZDJjMWE3OGY1ZWVlXCI7XG5cbmNvbnN0IENvbnRhaW5lciA9IHN0eWxlZChcImRpdlwiKSh7XG4gIGRpc3BsYXk6IFwiZmxleFwiLFxuICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxuICBib3JkZXJSYWRpdXM6IDMsXG4gIGJhY2tncm91bmRDb2xvcjogV0hJVEUsXG4gIGJveFNoYWRvdzogXCIwIDFweCAycHggMCByZ2JhKDAsMCwwLC4xKVwiLFxuICBwYWRkaW5nOiBcIjFyZW1cIixcbn0pO1xuXG5jb25zdCBXYWxsZXRTZXR0aW5ncyA9ICh7IGN1cnJlbnRVc2VyIH0pID0+IHtcbiAgY29uc29sZS5sb2coXCJjdXJyZW50VXNlclwiLCBjdXJyZW50VXNlcik7XG4gIGNvbnN0IFt3YWxsZXRVc2VyLCBzZXRXYWxsZXRVc2VyXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbdmF1bHRJc1NldHVwLCBzZXRWYXVsdElzU2V0dXBdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY29sbGVjdGlvbklzU2V0dXAsIHNldENvbGxlY3Rpb25Jc1NldHVwXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3dhbGxldEJhbGFuY2UsIHNldFdhbGxldEJhbGFuY2VdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFt3YWxsZXRDb2xsZWN0aW9uLCBzZXRXYWxsZXRDb2xsZWN0aW9uXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIGxldCBwb2xsSWQgPSBudWxsO1xuICBjb25zdCBzdGFydEJhbGFuY2VQb2xsID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBnZXRVc2VyQmFsYW5jZSgpO1xuICAgIHNldFdhbGxldEJhbGFuY2UoYmFsYW5jZSk7XG4gICAgcG9sbElkID0gc2V0VGltZW91dChzdGFydEJhbGFuY2VQb2xsLCAyMDAwKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoXG4gICAgKCkgPT5cbiAgICAgIGZjbC5jdXJyZW50VXNlcigpLnN1YnNjcmliZShhc3luYyAodXNlcikgPT4ge1xuICAgICAgICBpZiAodXNlci5sb2dnZWRJbikge1xuICAgICAgICAgIHNldFdhbGxldFVzZXIodXNlcik7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHdhbGxldCBpcyBzZXQgdXAgeWV0XG4gICAgICAgICAgY29uc3QgdmF1bHRTdGF0dXMgPSBhd2FpdCBjaGVja1VzZXJWYXVsdFN0YXR1cygpO1xuICAgICAgICAgIHNldFZhdWx0SXNTZXR1cCh2YXVsdFN0YXR1cyk7XG4gICAgICAgICAgaWYgKHZhdWx0U3RhdHVzKSB7XG4gICAgICAgICAgICAvLyBnZXRVc2VyQmFsYW5jZSgpO1xuICAgICAgICAgICAgc3RhcnRCYWxhbmNlUG9sbCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uU3RhdHVzID0gYXdhaXQgY2hlY2tVc2VyQ29sbGVjdGlvblN0YXR1cygpO1xuICAgICAgICAgIHNldENvbGxlY3Rpb25Jc1NldHVwKGNvbGxlY3Rpb25TdGF0dXMpO1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uU3RhdHVzKSB7XG4gICAgICAgICAgICBnZXRVc2VyQ29sbGVjdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImlzIG5vdCBsb2dnZWQgaW5cIik7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgIFtdXG4gICk7XG5cbiAgY29uc3QgW2Fzc29jaWF0ZVdhbGxldCwgeyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9XSA9IHVzZU11dGF0aW9uKFxuICAgIEFTU09DSUFURV9XQUxMRVQsXG4gICAge1xuICAgICAgdXBkYXRlOiAoY2FjaGUsIHsgZGF0YSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbWU6IGN1cnJlbnRVc2VyRGF0YSB9ID0gY2FjaGUucmVhZFF1ZXJ5KHtcbiAgICAgICAgICBxdWVyeTogQ1VSUkVOVF9VU0VSX1FVRVJZLFxuICAgICAgICB9KTtcbiAgICAgICAgY2FjaGUud3JpdGVRdWVyeSh7XG4gICAgICAgICAgcXVlcnk6IENVUlJFTlRfVVNFUl9RVUVSWSxcbiAgICAgICAgICBkYXRhOiB7IG1lOiB7IC4uLmN1cnJlbnRVc2VyRGF0YSwgLi4uZGF0YS5hc3NvY2lhdGVXYWxsZXQgfSB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiAoKSA9PiB7XG4gICAgICAgIHRvYXN0LmVycm9yKFwi8J+Ys0Vra2shIEZhaWxlZCB0byBhc3NvY2lhdGUgd2FsbGV0LlwiLCB7XG4gICAgICAgICAgcG9zaXRpb246IFwiYm90dG9tLWxlZnRcIixcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH1cbiAgKTtcblxuICBjb25zdCB3YWxsZXRDb25uZWN0ZWQgPSB3YWxsZXRVc2VyICYmIHdhbGxldFVzZXIubG9nZ2VkSW47XG4gIGNvbnN0IHdhbGxldE5vdENvbm5lY3RlZCA9XG4gICAgd2FsbGV0VXNlciA9PT0gbnVsbCB8fCAod2FsbGV0VXNlciAmJiAhd2FsbGV0VXNlci5sb2dnZWRJbik7XG5cbiAgY29uc3QgZ2V0QWRkcmVzcyA9ICh1c2VyLCBudWxsUHJlZml4ID0gdHJ1ZSkgPT4ge1xuICAgIHJldHVybiBudWxsUHJlZml4ID8gYDB4JHt1c2VyLmFkZHJ9YCA6IHVzZXIuYWRkcjtcbiAgfTtcblxuICBjb25zdCBnZW5lcmF0ZUNvZGUgPSBhc3luYyAocmF3Q29kZSwgbWF0Y2gpID0+IHtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gcmF3Q29kZTtcbiAgICB9XG4gICAgY29uc3QgeyBxdWVyeSB9ID0gbWF0Y2g7XG4gICAgcmV0dXJuIHJhd0NvZGUucmVwbGFjZShxdWVyeSwgKGl0ZW0pID0+IHtcbiAgICAgIHJldHVybiBtYXRjaFtpdGVtXTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBnZXRVc2VyQmFsYW5jZSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1c2VyLnNuYXBzaG90KCk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGdldEFkZHJlc3Moc25hcHNob3QpO1xuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IFwiMHgwMWNmMGUyZjJmNzE1NDUwXCI7XG4gICAgY29uc3Qgc2NyaXB0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZSh2YXVsdEJhbGFuY2UsIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcbiAgICBjb25zdCBzY3JpcHQgPSBzZGsuc2NyaXB0YCR7c2NyaXB0Q29kZX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoW3NjcmlwdF0pO1xuICAgIGNvbnN0IGJhbGFuY2UgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gYmFsYW5jZTtcbiAgfTtcblxuICBjb25zdCBnZXRVc2VyQ29sbGVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcImNhbGxpbmcgZ2V0VXNlckNvbGxlY3Rpb25cIik7XG4gICAgY29uc3QgdXNlciA9IGZjbC5jdXJyZW50VXNlcigpO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXNlci5zbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBnZXRBZGRyZXNzKHNuYXBzaG90KTtcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBcIjB4ZjNmY2QyYzFhNzhmNWVlZVwiO1xuICAgIGNvbnN0IHNjcmlwdENvZGUgPSBhd2FpdCBnZW5lcmF0ZUNvZGUoZ2V0Q29sbGVjdGlvbkl0ZW1zLCB7XG4gICAgICBxdWVyeTogLygweDAxfDB4MDIpL2csXG4gICAgICBcIjB4MDFcIjogY29udHJhY3RBZGRyZXNzLFxuICAgICAgXCIweDAyXCI6IGFkZHJlc3MsXG4gICAgfSk7XG4gICAgY29uc3Qgc2NyaXB0ID0gc2RrLnNjcmlwdGAke3NjcmlwdENvZGV9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZjbC5zZW5kKFtzY3JpcHRdKTtcbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGZjbC5kZWNvZGUocmVzcG9uc2UpO1xuICAgIHNldFdhbGxldENvbGxlY3Rpb24oaXRlbXMpO1xuICB9O1xuXG4gIGNvbnN0IHNldHVwVXNlclZhdWx0ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIENyZWF0ZSB0aGUgdXNlciB2YXVsdFxuICAgIGNvbnN0IHVzZXIgPSBmY2wuY3VycmVudFVzZXIoKTtcbiAgICBjb25zdCB7IGF1dGhvcml6YXRpb24gfSA9IHVzZXI7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1c2VyLnNuYXBzaG90KCk7XG4gICAgY29uc3QgYWRkcmVzcyA9IGdldEFkZHJlc3Moc25hcHNob3QpO1xuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IFwiMHgwMWNmMGUyZjJmNzE1NDUwXCI7XG4gICAgY29uc3QgaW5pdENvZGUgPSBhd2FpdCBnZW5lcmF0ZUNvZGUodXNlclZhdWx0LCB7XG4gICAgICBxdWVyeTogLygweDAxKS9nLFxuICAgICAgXCIweDAxXCI6IGNvbnRyYWN0QWRkcmVzcyxcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaW5pdFJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoXG4gICAgICAgIFtcbiAgICAgICAgICBzZGsudHJhbnNhY3Rpb25gJHtpbml0Q29kZX1gLFxuICAgICAgICAgIGZjbC5wcm9wb3NlcihhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICBmY2wucGF5ZXIoYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgZmNsLmF1dGhvcml6YXRpb25zKFthdXRob3JpemF0aW9uXSksXG4gICAgICAgICAgZmNsLmxpbWl0KDEwMCksXG4gICAgICAgIF0sXG4gICAgICAgIHtcbiAgICAgICAgICBub2RlOiBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiLFxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2coXCJzZXR1cFVzZXJWYXVsdCBpbml0UmVzcG9uc2VcIiwgaW5pdFJlc3BvbnNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcInNldHVwVXNlclZhdWx0IGNhdWdodCBlcnJvclwiLCBlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2hlY2tVc2VyVmF1bHRTdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGZjbC5jdXJyZW50VXNlcigpO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXNlci5zbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBnZXRBZGRyZXNzKHNuYXBzaG90KTtcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBcIjB4MDFjZjBlMmYyZjcxNTQ1MFwiO1xuICAgIGNvbnN0IHNjcmlwdENvZGUgPSBhd2FpdCBnZW5lcmF0ZUNvZGUoY2hlY2tSZWZlcmVuY2UsIHtcbiAgICAgIHF1ZXJ5OiAvKDB4MDF8MHgwMikvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgICBcIjB4MDJcIjogYWRkcmVzcyxcbiAgICB9KTtcbiAgICBjb25zdCBzY3JpcHQgPSBzZGsuc2NyaXB0YCR7c2NyaXB0Q29kZX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmNsLnNlbmQoW3NjcmlwdF0pO1xuICAgIGNvbnN0IGNoZWNrUmVzdWx0ID0gYXdhaXQgZmNsLmRlY29kZShyZXNwb25zZSk7XG4gICAgcmV0dXJuIGNoZWNrUmVzdWx0O1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrVXNlckNvbGxlY3Rpb25TdGF0dXMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCItLS0tIGNhbGxpbmcgY2hlY2tVc2VyQ29sbGVjdGlvblN0YXR1cyAtLS0tXCIpO1xuICAgIGNvbnN0IHVzZXIgPSBmY2wuY3VycmVudFVzZXIoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCIweGYzZmNkMmMxYTc4ZjVlZWVcIjtcbiAgICBjb25zdCBzY3JpcHRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKGNoZWNrQ29sbGVjdGlvbiwge1xuICAgICAgcXVlcnk6IC8oMHgwMXwweDAyKS9nLFxuICAgICAgXCIweDAxXCI6IGNvbnRyYWN0QWRkcmVzcyxcbiAgICAgIFwiMHgwMlwiOiBhZGRyZXNzLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJzY3JpcHRDb2RlXCIsIHNjcmlwdENvZGUpO1xuICAgIGNvbnN0IHNjcmlwdCA9IHNkay5zY3JpcHRgJHtzY3JpcHRDb2RlfWA7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmY2wuc2VuZChbc2NyaXB0XSk7XG4gICAgY29uc3QgY2hlY2tSZXN1bHQgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gY2hlY2tSZXN1bHQ7XG4gIH07XG5cbiAgY29uc3Qgc2V0dXBVc2VyQ29sbGVjdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgdGhlIHVzZXIgdmF1bHRcbiAgICBjb25zdCB1c2VyID0gZmNsLmN1cnJlbnRVc2VyKCk7XG4gICAgY29uc3QgeyBhdXRob3JpemF0aW9uIH0gPSB1c2VyO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXNlci5zbmFwc2hvdCgpO1xuICAgIGNvbnN0IGFkZHJlc3MgPSBnZXRBZGRyZXNzKHNuYXBzaG90KTtcbiAgICBjb25zdCBjb250cmFjdEFkZHJlc3MgPSBcIjB4ZjNmY2QyYzFhNzhmNWVlZVwiO1xuICAgIGNvbnN0IGluaXRDb2RlID0gYXdhaXQgZ2VuZXJhdGVDb2RlKHNldHVwTkZUQ29sbGVjdGlvbiwge1xuICAgICAgcXVlcnk6IC8oMHgwMSkvZyxcbiAgICAgIFwiMHgwMVwiOiBjb250cmFjdEFkZHJlc3MsXG4gICAgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGluaXRSZXNwb25zZSA9IGF3YWl0IGZjbC5zZW5kKFxuICAgICAgICBbXG4gICAgICAgICAgc2RrLnRyYW5zYWN0aW9uYCR7aW5pdENvZGV9YCxcbiAgICAgICAgICBmY2wucHJvcG9zZXIoYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgZmNsLnBheWVyKGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgIGZjbC5hdXRob3JpemF0aW9ucyhbYXV0aG9yaXphdGlvbl0pLFxuICAgICAgICAgIGZjbC5saW1pdCgxMDApLFxuICAgICAgICBdLFxuICAgICAgICB7XG4gICAgICAgICAgbm9kZTogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIixcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUubG9nKFwic2V0dXBORlRDb2xsZWN0aW9uIGluaXRSZXNwb25zZVwiLCBpbml0UmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwic2V0dXBORlRDb2xsZWN0aW9uIGNhdWdodCBlcnJvclwiLCBlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY29ubmVjdEFjdGl2ZVdhbGxldFRvTHlyYUxhYnMgPSBhc3luYyAoKSA9PiB7XG4gICAgYXNzb2NpYXRlV2FsbGV0KHtcbiAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICBhZGRyZXNzOiB3YWxsZXRVc2VyLmFkZHIsXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrQWN0aXZlV2FsbGV0ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIENoZWNrcyBpZiB0aGUgYWN0aXZlIHdhbGxldCBpcyBzZXR1cFxuICAgIGNvbnN0IHVzZXIgPSBmY2wuY3VycmVudFVzZXIoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVzZXIuc25hcHNob3QoKTtcbiAgICBjb25zdCBhZGRyZXNzID0gZ2V0QWRkcmVzcyhzbmFwc2hvdCk7XG4gICAgY29uc3Qgc2NyaXB0Q29kZSA9IGF3YWl0IGdlbmVyYXRlQ29kZShjaGVja0FjdGl2ZVdhbGxldCwge1xuICAgICAgcXVlcnk6IC8oMHgwMXwweDAyfDB4MDMpL2csXG4gICAgICBcIjB4MDFcIjogYDB4JHtGVU5HSUJMRV9UT0tFTl9DT05UUkFDVF9BRERSRVNTfWAsXG4gICAgICBcIjB4MDJcIjogYDB4JHtOT05fRlVOR0lCTEVfVE9LRU5fQ09OVFJBQ1RfQUREUkVTU31gLFxuICAgICAgXCIweDAzXCI6IGFkZHJlc3MsXG4gICAgfSk7XG4gICAgY29uc3Qgc2NyaXB0ID0gc2RrLnNjcmlwdGAke3NjcmlwdENvZGV9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZjbC5zZW5kKFtzY3JpcHRdKTtcbiAgICBjb25zdCBhY3RpdmVXYWxsZXRTdGF0dXMgPSBhd2FpdCBmY2wuZGVjb2RlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gYWN0aXZlV2FsbGV0U3RhdHVzO1xuICB9O1xuXG4gIGNvbnN0IHNldHVwQWN0aXZlV2FsbGV0ID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIENyZWF0ZXMgYSB2YXVsdCBhbmQgY29sbGVjdGlvbiBpbiB0aGUgYWN0aXZlIHdhbGxldFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIHtjdXJyZW50VXNlciAmJlxuICAgICAgICBjdXJyZW50VXNlci53YWxsZXRBZGRyZXNzICYmXG4gICAgICAgIGN1cnJlbnRVc2VyLndhbGxldElzU2V0dXAgJiYgKFxuICAgICAgICAgIDxkaXY+e2BDdXJyZW50IEFzc29jaWF0ZWQgV2FsbGV0IEFkZHJlc3M6ICR7Y3VycmVudFVzZXIud2FsbGV0QWRkcmVzc31gfTwvZGl2PlxuICAgICAgICApfVxuICAgICAge3dhbGxldENvbm5lY3RlZCAmJiB3YWxsZXRVc2VyICYmIChcbiAgICAgICAgPGRpdj57YEFjdGl2ZSBXYWxsZXQgQWRkcmVzczogJHt3YWxsZXRVc2VyLmFkZHJ9YH08L2Rpdj5cbiAgICAgICl9XG4gICAgICB7d2FsbGV0Q29ubmVjdGVkICYmIHZhdWx0SXNTZXR1cCAmJiB3YWxsZXRCYWxhbmNlICYmIChcbiAgICAgICAgPGRpdj57YEJhbGFuY2U6ICR7d2FsbGV0QmFsYW5jZX0gYH08L2Rpdj5cbiAgICAgICl9XG4gICAgICB7d2FsbGV0Q29ubmVjdGVkICYmIGNvbGxlY3Rpb25Jc1NldHVwICYmIHdhbGxldENvbGxlY3Rpb24gJiYgKFxuICAgICAgICA8ZGl2PntgQ29sbGVjdGlvbjogJHtKU09OLnN0cmluZ2lmeSh3YWxsZXRDb2xsZWN0aW9uKX1gfTwvZGl2PlxuICAgICAgKX1cbiAgICAgIHt3YWxsZXRDb25uZWN0ZWQgJiZcbiAgICAgICAgd2FsbGV0VXNlciAmJlxuICAgICAgICB3YWxsZXRVc2VyLmFkZHIgJiZcbiAgICAgICAgY3VycmVudFVzZXIgJiZcbiAgICAgICAgIWN1cnJlbnRVc2VyLndhbGxldElzU2V0dXAgJiZcbiAgICAgICAgIWN1cnJlbnRVc2VyLndhbGxldEFkZHJlc3MgJiYgKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Q29yYWxCdXR0b24gb25DbGljaz17Y29ubmVjdEFjdGl2ZVdhbGxldFRvTHlyYUxhYnN9PlxuICAgICAgICAgICAgICBDb25uZWN0IEFjdGl2ZSBXYWxsZXQgdG8gTHlyYUxhYnMgYWNjb3VudFxuICAgICAgICAgICAgPC9Db3JhbEJ1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgPGRpdj4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPC9kaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICB7d2FsbGV0Tm90Q29ubmVjdGVkICYmIChcbiAgICAgICAgICA8Q29yYWxCdXR0b24gb25DbGljaz17ZmNsLmF1dGhlbnRpY2F0ZX0+Q29ubmVjdCBXYWxsZXQ8L0NvcmFsQnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8YnIgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICAgIHt3YWxsZXRDb25uZWN0ZWQgJiYgIXZhdWx0SXNTZXR1cCAmJiAoXG4gICAgICAgICAgPENvcmFsQnV0dG9uIG9uQ2xpY2s9e3NldHVwVXNlclZhdWx0fT5TZXR1cCBWYXVsdDwvQ29yYWxCdXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxiciAvPlxuICAgICAgICA8YnIgLz5cbiAgICAgICAge3dhbGxldENvbm5lY3RlZCAmJiAhY29sbGVjdGlvbklzU2V0dXAgJiYgKFxuICAgICAgICAgIDxDb3JhbEJ1dHRvbiBvbkNsaWNrPXtzZXR1cFVzZXJDb2xsZWN0aW9ufT5cbiAgICAgICAgICAgIFNldHVwIENvbGxlY3Rpb25cbiAgICAgICAgICA8L0NvcmFsQnV0dG9uPlxuICAgICAgICApfVxuXG4gICAgICAgIHsvKiB7d2FsbGV0Q29ubmVjdGVkICYmIChcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxNCB9fT5cbiAgICAgICAgICAgIDxKU09OUHJldHR5IGlkPVwianNvbi1wcmV0dHlcIiBkYXRhPXt3YWxsZXRVc2VyfT48L0pTT05QcmV0dHk+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9ICovfVxuICAgICAgPC9kaXY+XG4gICAgPC9Db250YWluZXI+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBXYWxsZXRTZXR0aW5ncztcbiJdfQ== */\");\n\nconst WalletSettings = ({\n  currentUser\n}) => {\n  console.log(\"currentUser\", currentUser);\n  const {\n    0: walletUser,\n    1: setWalletUser\n  } = useState(null);\n  const {\n    0: vaultIsSetup,\n    1: setVaultIsSetup\n  } = useState(false);\n  const {\n    0: collectionIsSetup,\n    1: setCollectionIsSetup\n  } = useState(false);\n  const {\n    0: walletBalance,\n    1: setWalletBalance\n  } = useState(null);\n  const {\n    0: walletCollection,\n    1: setWalletCollection\n  } = useState(null);\n  let pollId = null;\n\n  const startBalancePoll = async () => {\n    const balance = await getUserBalance();\n    setWalletBalance(balance);\n    pollId = setTimeout(startBalancePoll, 2000);\n  };\n\n  useEffect(() => fcl.currentUser().subscribe(async user => {\n    if (user.loggedIn) {\n      setWalletUser(user); // Check if the wallet is set up yet\n\n      const vaultStatus = await checkUserVaultStatus();\n      setVaultIsSetup(vaultStatus);\n\n      if (vaultStatus) {\n        // getUserBalance();\n        startBalancePoll();\n      }\n\n      const collectionStatus = await checkUserCollectionStatus();\n      setCollectionIsSetup(collectionStatus);\n\n      if (collectionStatus) {\n        getUserCollection();\n      }\n    } else {\n      console.log(\"is not logged in\");\n    }\n  }), []);\n  const [associateWallet, {\n    data,\n    loading,\n    error\n  }] = useMutation(ASSOCIATE_WALLET, {\n    update: (cache, {\n      data\n    }) => {\n      const {\n        me: currentUserData\n      } = cache.readQuery({\n        query: CURRENT_USER_QUERY\n      });\n      cache.writeQuery({\n        query: CURRENT_USER_QUERY,\n        data: {\n          me: _objectSpread(_objectSpread({}, currentUserData), data.associateWallet)\n        }\n      });\n    },\n    onError: () => {\n      toast.error(\"ðŸ˜³Ekkk! Failed to associate wallet.\", {\n        position: \"bottom-left\"\n      });\n    }\n  });\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected = walletUser === null || walletUser && !walletUser.loggedIn;\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n\n    const {\n      query\n    } = match;\n    return rawCode.replace(query, item => {\n      return match[item];\n    });\n  };\n\n  const getUserBalance = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(vaultBalance, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const balance = await fcl.decode(response);\n    return balance;\n  };\n\n  const getUserCollection = async () => {\n    console.log(\"calling getUserCollection\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(getCollectionItems, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const items = await fcl.decode(response);\n    setWalletCollection(items);\n  };\n\n  const setupUserVault = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const {\n      authorization\n    } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const initCode = await generateCode(userVault, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress\n    });\n\n    try {\n      const initResponse = await fcl.send([sdk.transaction`${initCode}`, fcl.proposer(authorization), fcl.payer(authorization), fcl.authorizations([authorization]), fcl.limit(100)], {\n        node: \"http://localhost:8080\"\n      });\n      console.log(\"setupUserVault initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupUserVault caught error\", e);\n    }\n  };\n\n  const checkUserVaultStatus = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const checkUserCollectionStatus = async () => {\n    console.log(\"---- calling checkUserCollectionStatus ----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(checkCollection, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address\n    });\n    console.log(\"scriptCode\", scriptCode);\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const setupUserCollection = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const {\n      authorization\n    } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const initCode = await generateCode(setupNFTCollection, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress\n    });\n\n    try {\n      const initResponse = await fcl.send([sdk.transaction`${initCode}`, fcl.proposer(authorization), fcl.payer(authorization), fcl.authorizations([authorization]), fcl.limit(100)], {\n        node: \"http://localhost:8080\"\n      });\n      console.log(\"setupNFTCollection initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupNFTCollection caught error\", e);\n    }\n  };\n\n  const connectActiveWalletToLyraLabs = async () => {\n    associateWallet({\n      variables: {\n        address: walletUser.addr\n      }\n    });\n  };\n\n  const checkActiveWallet = async () => {\n    // Checks if the active wallet is setup\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const scriptCode = await generateCode(checkActiveWallet, {\n      query: /(0x01|0x02|0x03)/g,\n      \"0x01\": `0x${FUNGIBLE_TOKEN_CONTRACT_ADDRESS}`,\n      \"0x02\": `0x${NON_FUNGIBLE_TOKEN_CONTRACT_ADDRESS}`,\n      \"0x03\": address\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const activeWalletStatus = await fcl.decode(response);\n    return activeWalletStatus;\n  };\n\n  const setupActiveWallet = async () => {// Creates a vault and collection in the active wallet\n  };\n\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 5\n    }\n  }, currentUser && currentUser.walletAddress && currentUser.walletIsSetup && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, `Current Associated Wallet Address: ${currentUser.walletAddress}`), walletConnected && walletUser && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 9\n    }\n  }, `Active Wallet Address: ${walletUser.addr}`), walletConnected && vaultIsSetup && walletBalance && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, `Balance: ${walletBalance} `), walletConnected && collectionIsSetup && walletCollection && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 9\n    }\n  }, `Collection: ${JSON.stringify(walletCollection)}`), walletConnected && walletUser && walletUser.addr && currentUser && !currentUser.walletIsSetup && !currentUser.walletAddress && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 11\n    }\n  }, __jsx(CoralButton, {\n    onClick: connectActiveWalletToLyraLabs,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, \"Connect Active Wallet to LyraLabs account\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }\n  }, \"-------------------------------------\"), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }\n  }, walletNotConnected && __jsx(CoralButton, {\n    onClick: fcl.authenticate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 11\n    }\n  }, \"Connect Wallet\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 9\n    }\n  }), walletConnected && !vaultIsSetup && __jsx(CoralButton, {\n    onClick: setupUserVault,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 11\n    }\n  }, \"Setup Vault\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 9\n    }\n  }), walletConnected && !collectionIsSetup && __jsx(CoralButton, {\n    onClick: setupUserCollection,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }\n  }, \"Setup Collection\")));\n};\n\nexport default WalletSettings;","map":{"version":3,"sources":["/Users/lukehamilton/development/lyra-labs-dev/lyra-labs/frontend/components/wallet-settings/index.js"],"names":["React","useState","useEffect","sdk","useMutation","ASSOCIATE_WALLET","JSONPretty","toast","CURRENT_USER_QUERY","CoralButton","MintButton","GradientButton","checkReference","checkCollection","checkActiveWallet","vaultBalance","getCollectionItems","userVault","setupNFTCollection","fcl","WHITE","LIGHT_CORAL","MAGIC_MINT","config","put","FUNGIBLE_TOKEN_CONTRACT_ADDRESS","NON_FUNGIBLE_TOKEN_CONTRACT_ADDRESS","Container","display","flexDirection","borderRadius","backgroundColor","boxShadow","padding","WalletSettings","currentUser","console","log","walletUser","setWalletUser","vaultIsSetup","setVaultIsSetup","collectionIsSetup","setCollectionIsSetup","walletBalance","setWalletBalance","walletCollection","setWalletCollection","pollId","startBalancePoll","balance","getUserBalance","setTimeout","subscribe","user","loggedIn","vaultStatus","checkUserVaultStatus","collectionStatus","checkUserCollectionStatus","getUserCollection","associateWallet","data","loading","error","update","cache","me","currentUserData","readQuery","query","writeQuery","onError","position","walletConnected","walletNotConnected","getAddress","nullPrefix","addr","generateCode","rawCode","match","replace","item","snapshot","address","contractAddress","scriptCode","script","response","send","decode","items","setupUserVault","authorization","initCode","initResponse","transaction","proposer","payer","authorizations","limit","node","e","checkResult","setupUserCollection","connectActiveWalletToLyraLabs","variables","activeWalletStatus","setupActiveWallet","walletAddress","walletIsSetup","JSON","stringify","authenticate"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport * as sdk from \"@onflow/sdk\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { ASSOCIATE_WALLET } from \"@data/mutations\";\nimport JSONPretty from \"react-json-pretty\";\nimport { toast } from \"react-toastify\";\nimport { CURRENT_USER_QUERY } from \"../../data/queries\";\nimport CoralButton from \"@library/components/buttons/coral\";\nimport MintButton from \"@library/components/buttons/mint\";\nimport GradientButton from \"@library/components/buttons/gradient\";\nimport checkReference from \"../../flow/scripts/check-ref.cdc\";\nimport checkCollection from \"../../flow/scripts/check-collection.cdc\";\nimport checkActiveWallet from \"../../flow/scripts/check-active-wallet.cdc\";\nimport vaultBalance from \"../../flow/scripts/vault-balance.cdc\";\nimport getCollectionItems from \"../../flow/scripts/get-collection-items.cdc\";\nimport userVault from \"../../flow/transactions/user-vault.cdc\";\nimport setupNFTCollection from \"../../flow/transactions/setup-nft-collection.cdc\";\nimport styled from \"@emotion/styled\";\nimport * as fcl from \"@onflow/fcl\";\nimport { WHITE, LIGHT_CORAL, MAGIC_MINT } from \"@style/colors\";\n\nfcl\n  .config()\n  .put(\"challenge.handshake\", \"http://localhost:8701/flow/authenticate\");\n\nconst FUNGIBLE_TOKEN_CONTRACT_ADDRESS = \"01cf0e2f2f715450\";\nconst NON_FUNGIBLE_TOKEN_CONTRACT_ADDRESS = \"f3fcd2c1a78f5eee\";\n\nconst Container = styled(\"div\")({\n  display: \"flex\",\n  flexDirection: \"column\",\n  borderRadius: 3,\n  backgroundColor: WHITE,\n  boxShadow: \"0 1px 2px 0 rgba(0,0,0,.1)\",\n  padding: \"1rem\",\n});\n\nconst WalletSettings = ({ currentUser }) => {\n  console.log(\"currentUser\", currentUser);\n  const [walletUser, setWalletUser] = useState(null);\n  const [vaultIsSetup, setVaultIsSetup] = useState(false);\n  const [collectionIsSetup, setCollectionIsSetup] = useState(false);\n  const [walletBalance, setWalletBalance] = useState(null);\n  const [walletCollection, setWalletCollection] = useState(null);\n\n  let pollId = null;\n  const startBalancePoll = async () => {\n    const balance = await getUserBalance();\n    setWalletBalance(balance);\n    pollId = setTimeout(startBalancePoll, 2000);\n  };\n\n  useEffect(\n    () =>\n      fcl.currentUser().subscribe(async (user) => {\n        if (user.loggedIn) {\n          setWalletUser(user);\n          // Check if the wallet is set up yet\n          const vaultStatus = await checkUserVaultStatus();\n          setVaultIsSetup(vaultStatus);\n          if (vaultStatus) {\n            // getUserBalance();\n            startBalancePoll();\n          }\n          const collectionStatus = await checkUserCollectionStatus();\n          setCollectionIsSetup(collectionStatus);\n          if (collectionStatus) {\n            getUserCollection();\n          }\n        } else {\n          console.log(\"is not logged in\");\n        }\n      }),\n    []\n  );\n\n  const [associateWallet, { data, loading, error }] = useMutation(\n    ASSOCIATE_WALLET,\n    {\n      update: (cache, { data }) => {\n        const { me: currentUserData } = cache.readQuery({\n          query: CURRENT_USER_QUERY,\n        });\n        cache.writeQuery({\n          query: CURRENT_USER_QUERY,\n          data: { me: { ...currentUserData, ...data.associateWallet } },\n        });\n      },\n      onError: () => {\n        toast.error(\"ðŸ˜³Ekkk! Failed to associate wallet.\", {\n          position: \"bottom-left\",\n        });\n      },\n    }\n  );\n\n  const walletConnected = walletUser && walletUser.loggedIn;\n  const walletNotConnected =\n    walletUser === null || (walletUser && !walletUser.loggedIn);\n\n  const getAddress = (user, nullPrefix = true) => {\n    return nullPrefix ? `0x${user.addr}` : user.addr;\n  };\n\n  const generateCode = async (rawCode, match) => {\n    if (!match) {\n      return rawCode;\n    }\n    const { query } = match;\n    return rawCode.replace(query, (item) => {\n      return match[item];\n    });\n  };\n\n  const getUserBalance = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(vaultBalance, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const balance = await fcl.decode(response);\n    return balance;\n  };\n\n  const getUserCollection = async () => {\n    console.log(\"calling getUserCollection\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(getCollectionItems, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const items = await fcl.decode(response);\n    setWalletCollection(items);\n  };\n\n  const setupUserVault = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const { authorization } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const initCode = await generateCode(userVault, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress,\n    });\n    try {\n      const initResponse = await fcl.send(\n        [\n          sdk.transaction`${initCode}`,\n          fcl.proposer(authorization),\n          fcl.payer(authorization),\n          fcl.authorizations([authorization]),\n          fcl.limit(100),\n        ],\n        {\n          node: \"http://localhost:8080\",\n        }\n      );\n      console.log(\"setupUserVault initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupUserVault caught error\", e);\n    }\n  };\n\n  const checkUserVaultStatus = async () => {\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0x01cf0e2f2f715450\";\n    const scriptCode = await generateCode(checkReference, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const checkUserCollectionStatus = async () => {\n    console.log(\"---- calling checkUserCollectionStatus ----\");\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const scriptCode = await generateCode(checkCollection, {\n      query: /(0x01|0x02)/g,\n      \"0x01\": contractAddress,\n      \"0x02\": address,\n    });\n\n    console.log(\"scriptCode\", scriptCode);\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const checkResult = await fcl.decode(response);\n    return checkResult;\n  };\n\n  const setupUserCollection = async () => {\n    // Create the user vault\n    const user = fcl.currentUser();\n    const { authorization } = user;\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const contractAddress = \"0xf3fcd2c1a78f5eee\";\n    const initCode = await generateCode(setupNFTCollection, {\n      query: /(0x01)/g,\n      \"0x01\": contractAddress,\n    });\n    try {\n      const initResponse = await fcl.send(\n        [\n          sdk.transaction`${initCode}`,\n          fcl.proposer(authorization),\n          fcl.payer(authorization),\n          fcl.authorizations([authorization]),\n          fcl.limit(100),\n        ],\n        {\n          node: \"http://localhost:8080\",\n        }\n      );\n      console.log(\"setupNFTCollection initResponse\", initResponse);\n    } catch (e) {\n      console.log(\"setupNFTCollection caught error\", e);\n    }\n  };\n\n  const connectActiveWalletToLyraLabs = async () => {\n    associateWallet({\n      variables: {\n        address: walletUser.addr,\n      },\n    });\n  };\n\n  const checkActiveWallet = async () => {\n    // Checks if the active wallet is setup\n    const user = fcl.currentUser();\n    const snapshot = await user.snapshot();\n    const address = getAddress(snapshot);\n    const scriptCode = await generateCode(checkActiveWallet, {\n      query: /(0x01|0x02|0x03)/g,\n      \"0x01\": `0x${FUNGIBLE_TOKEN_CONTRACT_ADDRESS}`,\n      \"0x02\": `0x${NON_FUNGIBLE_TOKEN_CONTRACT_ADDRESS}`,\n      \"0x03\": address,\n    });\n    const script = sdk.script`${scriptCode}`;\n    const response = await fcl.send([script]);\n    const activeWalletStatus = await fcl.decode(response);\n    return activeWalletStatus;\n  };\n\n  const setupActiveWallet = async () => {\n    // Creates a vault and collection in the active wallet\n  };\n\n  return (\n    <Container>\n      {currentUser &&\n        currentUser.walletAddress &&\n        currentUser.walletIsSetup && (\n          <div>{`Current Associated Wallet Address: ${currentUser.walletAddress}`}</div>\n        )}\n      {walletConnected && walletUser && (\n        <div>{`Active Wallet Address: ${walletUser.addr}`}</div>\n      )}\n      {walletConnected && vaultIsSetup && walletBalance && (\n        <div>{`Balance: ${walletBalance} `}</div>\n      )}\n      {walletConnected && collectionIsSetup && walletCollection && (\n        <div>{`Collection: ${JSON.stringify(walletCollection)}`}</div>\n      )}\n      {walletConnected &&\n        walletUser &&\n        walletUser.addr &&\n        currentUser &&\n        !currentUser.walletIsSetup &&\n        !currentUser.walletAddress && (\n          <div>\n            <CoralButton onClick={connectActiveWalletToLyraLabs}>\n              Connect Active Wallet to LyraLabs account\n            </CoralButton>\n          </div>\n        )}\n\n      <div>-------------------------------------</div>\n      <div>\n        {walletNotConnected && (\n          <CoralButton onClick={fcl.authenticate}>Connect Wallet</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && !vaultIsSetup && (\n          <CoralButton onClick={setupUserVault}>Setup Vault</CoralButton>\n        )}\n        <br />\n        <br />\n        {walletConnected && !collectionIsSetup && (\n          <CoralButton onClick={setupUserCollection}>\n            Setup Collection\n          </CoralButton>\n        )}\n\n        {/* {walletConnected && (\n          <div style={{ fontSize: 14 }}>\n            <JSONPretty id=\"json-pretty\" data={walletUser}></JSONPretty>\n          </div>\n        )} */}\n      </div>\n    </Container>\n  );\n};\n\nexport default WalletSettings;\n"]},"metadata":{},"sourceType":"module"}